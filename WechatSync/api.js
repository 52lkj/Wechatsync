!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=885)}({885:function(e,t){function n(){console.log("api ready");var e={versionNumber:1001},t={};function n(e,n){e.eventID=Math.floor(Date.now()+100*Math.random()),t[e.eventID]=function(e,t){n(e,t)},window.postMessage(JSON.stringify(e),"*")}e.getAccounts=function(e){n({method:"getAccounts"},e)};var o=null;e.addTask=function(e,t,a){o=t,n({method:"addTask",task:e},a)},e.magicCall=function(e,t){n({method:"magicCall",methodName:e.methodName,data:e},t)},e.updateDriver=function(e,t){n({method:"updateDriver",data:e},t)},e.uploadImage=function(e,t){n({method:"magicCall",methodName:"uploadImage",data:e},t)},window.addEventListener("message",function(e){try{var n=JSON.parse(e.data);if(n.method&&"taskUpdate"===n.method)return void(null!=o&&o(n.task));if(!n.callReturn)return;n.eventID&&t[n.eventID]&&(t[n.eventID](n.result),delete t[n.eventID])}catch(e){}}),window.$poster=e,window.$syncer=e}setTimeout(function(){var e=document.createElement("script");e.type="text/javascript",e.innerHTML=";(function() {  "+n.toString()+"; "+n.name+"();  })();",document.head.appendChild(e),document.head.removeChild(e),console.log("injject")},50);var o=[];function a(e){e.callReturn=!0,window.postMessage(JSON.stringify(e),"*")}window.location.href.indexOf("mp.weixin.qq.com"),chrome.runtime.onMessage.addListener(function(e,t,n){try{console.log("revice",e),"taskUpdate"==e.method&&a({task:e.task,method:"taskUpdate"})}catch(e){console.log(e)}});window.addEventListener("message",function(e){try{var t=JSON.parse(e.data);"getAccounts"==t.method&&function(e){chrome.extension.sendMessage({action:"getAccount"},function(t){o=t,e&&e()})}(function(){a({eventID:t.eventID,result:o})}),"addTask"==t.method&&chrome.extension.sendMessage({action:"addTask",task:t.task},function(e){console.log("addTask return",e)}),"magicCall"==t.method&&chrome.extension.sendMessage({action:"callDriverMethod",methodName:t.methodName,data:t.data},function(e){a({eventID:t.eventID,result:e})}),"updateDriver"==t.method&&chrome.extension.sendMessage({action:"updateDriver",data:t.data},function(e){a({eventID:t.eventID,result:e})})}catch(e){}})}});